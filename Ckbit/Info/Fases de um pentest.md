O processo de pentest pode ser dividido em cinco etapas principais. Abaixo, explico o funcionamento de cada passo, incluindo ferramentas que podem ser usadas em cada etapa.

---

### **1. Planejamento**

Nesta etapa, o foco é a definição do escopo, objetivos e regras do teste.

- **Funcionamento**:
    
    - **Escopo**: Determina o que será testado (redes, sistemas, aplicativos) e o que não será incluído.
    - **Objetivos**: Estabelece metas específicas, como testar a segurança de uma aplicação web ou avaliar a resistência da infraestrutura de rede.
    - **Regras**: Documenta os limites e as permissões, garantindo que o teste seja conduzido dentro da legalidade e ética.
    - **Metodologia**: Escolhe abordagens como teste de caixa preta (nenhuma informação inicial do sistema), caixa cinza (informação parcial) ou caixa branca (acesso completo).
- **Ferramentas**:
    
    - **Documentação**: Ferramentas como Google Docs, Excel ou software de gerenciamento de projetos como Trello para organizar e registrar informações.
    - **Comunicação**: Slack, Microsoft Teams ou e-mails para alinhar as equipes.
    - **Gestão do Escopo**: Ferramentas como ScopeVerify ou Termshark para formalizar e visualizar o que será incluído.

---

### **2. Reconhecimento**

O reconhecimento é a coleta de informações sobre o alvo, dividido em **passivo** e **ativo**.

- **Reconhecimento Passivo**:
    
    - Não envolve interação direta com o sistema-alvo.
    - Utiliza fontes públicas e ferramentas que exploram informações disponíveis na internet.
- **Ferramentas para Reconhecimento Passivo**:
    
    - **Shodan**: Mapeia dispositivos conectados à internet.
    - **WHOIS**: Para obter informações sobre domínios e IPs.
    - **Google Hacking (Dorks)**: Pesquisa avançada no Google para encontrar informações sensíveis.
- **Reconhecimento Ativo**:
    
    - Envolve interação direta com os sistemas-alvo para coletar informações mais detalhadas.
    - Pode incluir varredura de portas, serviços e sistemas operacionais.
- **Ferramentas para Reconhecimento Ativo**:
    
    - **Nmap**: Para mapeamento de portas, serviços e sistemas operacionais.
    - **Nikto**: Scanneia vulnerabilidades em servidores web.
    - **DNSenum**: Realiza enumeração de DNS.

---

### **3. Exploração**

Nesta fase, o objetivo é identificar e explorar vulnerabilidades encontradas no reconhecimento.

- **Funcionamento**:
    
    - Exploração visa comprovar a existência das vulnerabilidades encontradas.
    - Inclui tentativas de acessar sistemas, escalar privilégios ou comprometer serviços.
- **Ferramentas**:
    
    - **Metasploit Framework**: Um dos frameworks mais utilizados para exploração de vulnerabilidades.
    - **Burp Suite**: Focado em aplicações web, permite explorar vulnerabilidades como injeção de SQL, XSS, e muito mais.
    - **Exploit Database**: Repositório de exploits para vulnerabilidades conhecidas.
    - **Hydra** ou **Medusa**: Para ataques de força bruta em autenticações.

---

### **4. Pós-Exploração**

Depois que uma vulnerabilidade é explorada com sucesso, é hora de analisar o impacto e garantir persistência no sistema.

- **Funcionamento**:
    
    - **Coleta de Dados**: Extrair informações sensíveis, como senhas, e-mails, arquivos críticos, etc.
    - **Movimentação Lateral**: Acesso a outros sistemas dentro da mesma rede.
    - **Persistência**: Instalar backdoors ou configurar acesso remoto para manter controle mesmo após reinicializações.
- **Ferramentas**:
    
    - **Meterpreter** (via Metasploit): Para explorar o sistema de maneira interativa.
    - **PowerShell Empire**: Focado em sistemas Windows, facilita a pós-exploração.
    - **BloodHound**: Analisa redes do Active Directory para encontrar caminhos de escalonamento.

---

### **5. Relatório**

O relatório documenta as descobertas do pentest e é entregue ao cliente.

- **Conteúdo do Relatório**:
    
    - **Sumário Executivo**: Um resumo em linguagem não técnica, focado em gestores, explicando o impacto das vulnerabilidades.
    - **Metodologia e Escopo**: Descrição das abordagens utilizadas e dos sistemas testados.
    - **Resultados Detalhados**: Lista das vulnerabilidades encontradas, seu impacto, evidências (como capturas de tela), e métodos de exploração.
    - **Recomendações**: Sugestões para mitigar os problemas identificados.
    - **Conclusão**: Recapitulação dos principais pontos e avaliação geral da segurança.
- **Ferramentas para o Relatório**:
    
    - **LaTeX**: Para criação de relatórios técnicos bem formatados.
    - **Markdown**: Para relatórios leves e editáveis.
    - **MS Word ou Google Docs**: Para relatórios mais acessíveis.

---